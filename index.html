<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Budget Tracker</title>
    <link rel="manifest" href="manifest.json">
    <style>
        /* Critical CSS for instant render */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(to bottom right, #0f172a, #1e293b);
            color: white;
            min-height: 100vh;
            padding: 16px;
            padding-left: max(16px, env(safe-area-inset-left));
            padding-right: max(16px, env(safe-area-inset-right));
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
        }
        .container { max-width: 600px; margin: 0 auto; width: 100%; }
        h1 { text-align: center; font-size: 28px; margin-bottom: 24px; }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Budget Tracker</h1>

        <!-- Budget Bar Chart -->
        <div class="budget-chart">
            <div class="budget-bar-container" id="budgetBar">
                <div class="budget-segment bills" id="bills-segment" data-segment="bills">
                    <span class="seg-label">Bills</span>
                    <span class="seg-amount">‚Ç¨0</span>
                </div>
                <div class="budget-segment specials" id="specials-segment" data-segment="specials">
                    <span class="seg-label">Specials</span>
                    <span class="seg-amount">‚Ç¨0</span>
                </div>
                <div class="budget-segment daily active" id="daily-segment" data-segment="daily">
                    <div class="daily-header">
                        <span class="seg-label">Daily</span>
                        <span class="seg-amount">‚Ç¨0</span>
                    </div>
                    <div class="category-breakdown" id="categoryBreakdown"></div>
                </div>
            </div>
            <div class="budget-info">
                <span>Total: ‚Ç¨<span id="totalBudget">0</span></span>
                <span>30-day: <span id="thirtyDaySpend">‚Ç¨0</span></span>
            </div>
        </div>

        <!-- Quick Entry -->
        <div class="quick-entry">
            <div class="selected-segment-label" id="selectedLabel">Daily Expense</div>
            <div class="transaction-type-toggle">
                <button class="toggle-button active" id="expenseBtn" data-type="expense">Expense</button>
                <button class="toggle-button" id="incomeBtn" data-type="income">Income</button>
            </div>
            <div class="amount-input-container">
                <input type="text" id="amountInput" class="amount-input" placeholder="0" readonly>
                <button class="clear-button" id="clearBtn">‚úï</button>
            </div>

            <div class="digit-grid" id="digitGrid">
                <button class="digit-button" data-digit="1">1</button>
                <button class="digit-button" data-digit="2">2</button>
                <button class="digit-button" data-digit="3">3</button>
                <button class="digit-button" data-digit="4">4</button>
                <button class="digit-button" data-digit="5">5</button>
                <button class="digit-button" data-digit="6">6</button>
                <button class="digit-button" data-digit="7">7</button>
                <button class="digit-button" data-digit="8">8</button>
                <button class="digit-button" data-digit="9">9</button>
                <button class="digit-button" data-digit="0">0</button>
            </div>

            <div id="categoryButtons" class="category-grid">
                <button class="category-button in-food" data-category="In Food">In Food</button>
                <button class="category-button out-food" data-category="Out Food">Out Food</button>
                <button class="category-button shopping" data-category="Shopping">Shopping</button>
                <button class="category-button entertainment" data-category="Entertainment">Entertainment</button>
                <button class="category-button others" data-category="Others">Others</button>
            </div>

            <button id="labelButton" class="label-button" style="display: none;">Add Label & Save</button>
        </div>

        <!-- Expenses List -->
        <div class="expenses-list" id="expensesList"></div>

        <!-- Settings Button -->
        <button class="settings-button" id="settingsBtn">‚öôÔ∏è</button>

        <!-- Import/Export Buttons -->
        <button class="action-button export-button" id="exportBtn">üì§</button>
        <button class="action-button import-button" id="importBtn">üì•</button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Budget Settings</h2>
                <button class="close-button" id="closeSettings">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label>Bills & Subscriptions</label>
                    <input type="number" id="billsInput" class="setting-input" step="1">
                </div>
                <div class="setting-item">
                    <label>Monthly Specials Budget</label>
                    <input type="number" id="specialsInput" class="setting-input" step="1">
                </div>
                <div class="setting-item">
                    <label>Daily Discretionary Budget</label>
                    <input type="number" id="dailyInput" class="setting-input" step="1">
                </div>
                <button class="modal-button primary" id="saveSettings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Label Modal -->
    <div id="labelModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="labelModalTitle">Add Description</h2>
                <button class="close-button" id="closeLabelModal">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="text" id="labelInput" class="setting-input" placeholder="Enter description...">
                <button class="modal-button primary" id="saveLabelExpense">Save</button>
            </div>
        </div>
    </div>

    <!-- Import/Export Modal -->
    <div id="importExportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Import / Export Data</h2>
                <button class="close-button" id="closeImportExport">‚úï</button>
            </div>
            <div class="modal-body">
                <textarea id="importExportText" class="import-export-textarea" placeholder="Paste JSON data here to import..."></textarea>
                <button class="modal-button primary" id="saveImportExport" onclick="copyToClipboard()">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <script src="app.js" defer></script>
</body>
</html>
